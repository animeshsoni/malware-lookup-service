from flask import Flask
service = Flask(__name__)

# Home screen for the service. TODO: Add link to instructions or remove this function if not needed.
@service.route("/")
def home():
    return "Malware URL lookup service!"

# Fake list of malwares to experiment with. TODO: Use a DB to store data.
malwareDB=["malware"+str(i) for i in range(500)]

# Function to serve the queries at GET /v1/urlinfo/{resource_url_with_query_string}
@service.route('/v1/urlinfo/<resource_url_with_query_string>',methods=['GET'])
def isMalware(resource_url_with_query_string):
    #TODO: Change return type to JSON object with more information if needed.
    return str(resource_url_with_query_string in malwareDB)

#Function to add new URLs to malware DB. Not a requirement for mvp. Implement later
# @service.route('/v1/urlinfo',methods=['PUT'])
# def addMalware():
#   return ""

# Start the service. Currently hosted on localhost:5000. TODO: Change the default and host it on web if required.
if __name__ == "__main__":
    service.run()